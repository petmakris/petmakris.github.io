---
layout: default
---





<!-- Prev/Next pager -->
<nav class="post-pager" style="display:flex; justify-content:space-between; gap:1rem; margin-top:2rem; padding-top:1rem; border-top:1px solid #e5e5e5;">
  <div>
    {% if page.previous %}
      <a rel="prev" href="{{ page.previous.url | relative_url }}" title="{{ page.previous.title }}">
        ⬅️ {{ page.previous.date | date: "%Y-%m-%d" }}
      </a>
    {% endif %}
  </div>

  <div style="margin-left:auto; text-align:right;">
    {% if page.next %}
      <a rel="next" href="{{ page.next.url | relative_url }}" title="{{ page.next.title }}">
        {{ page.next.date | date: "%Y-%m-%d" }} ➡️
      </a>
    {% endif %}
  </div>
</nav>


<main class="page-content" aria-label="Content" style="max-width: 860px; margin: 0 auto; padding: 2rem 1rem;">
  <article class="post">
    <header>
      <h1>{{ page.title }}</h1>

      <!--
      <p><small>{{ page.date | date: "%Y-%m-%d" }}</small></p>
      
      {% if page.tags %}
        <p><small>Tags: {{ page.tags | join: ", " }}</small></p>
      {% endif %}
      -->

    </header>

    <!-- Calorie Visualization Component -->
    {% if page.cal.intake and page.cal.tdee %}
    {% assign intake = page.cal.intake | plus: 0 %}
    {% assign tdee = page.cal.tdee | plus: 0 %}
    {% assign active = page.cal.active | default: 0 | plus: 0 %}
    {% assign rmr = tdee | minus: active %}
    {% assign deficit = page.cal.deficit | default: 0 | plus: 0 %}
    {% assign is_deficit = false %}
    {% assign is_surplus = false %}
    
    {% if intake < tdee %}
      {% assign is_deficit = true %}
      {% assign deficit_amount = tdee | minus: intake %}
    {% elsif intake > tdee %}
      {% assign is_surplus = true %}
      {% assign surplus_amount = intake | minus: tdee %}
    {% endif %}

    <div class="calorie-viz" style="margin: 2rem 0; padding: 1.5rem; background: #f8f9fa; border-radius: 8px;">
      <h3 style="margin-top: 0; margin-bottom: 1.5rem; font-size: 1.2rem; text-align: center;">
        {% if is_deficit %}DEFICIT CASE{% elsif is_surplus %}SURPLUS CASE{% else %}MAINTENANCE{% endif %}
      </h3>
      
      <div style="margin-bottom: 0.5rem; font-size: 0.9rem; color: #666;">
        <strong>TDEE = RMR + ACTIVE</strong> ({{ tdee }} kcal)
      </div>
      
      <!-- TDEE Bar -->
      <div style="position: relative; margin-bottom: 1.5rem;">
        <div style="display: flex; height: 40px; border: 2px solid #333; border-radius: 4px; overflow: hidden;">
          {% if rmr > 0 %}
          <div style="width: {{ rmr | times: 100.0 | divided_by: tdee }}%; background: #999; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.85rem; font-weight: bold;">
            {% if rmr > 100 %}RMR{% endif %}
          </div>
          {% endif %}
          {% if active > 0 %}
          <div style="width: {{ active | times: 100.0 | divided_by: tdee }}%; background: #4a90e2; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.85rem; font-weight: bold;">
            {% if active > 100 %}Active{% endif %}
          </div>
          {% endif %}
        </div>
        <div style="position: absolute; top: -20px; left: 0; right: 0; text-align: center; font-size: 0.75rem; color: #666;">
          TDEE: {{ tdee }} kcal
        </div>
      </div>

      <div style="margin-bottom: 0.5rem; font-size: 0.9rem; color: #666;">
        {% if is_deficit %}
          <strong>Intake on a deficit!</strong>
        {% elsif is_surplus %}
          <strong>Intake on a surplus!</strong>
        {% else %}
          <strong>Intake</strong>
        {% endif %}
      </div>

      <!-- Intake Bar (positioned relative to TDEE) -->
      <div style="position: relative; margin-bottom: 1rem;">
        {% if is_deficit %}
          <!-- Deficit case: show intake bar + green deficit space -->
          <div style="display: flex; height: 40px; border: 2px solid #333; border-radius: 4px; overflow: hidden;">
            <div style="width: {{ intake | times: 100.0 | divided_by: tdee }}%; background: #808080; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.85rem; font-weight: bold;">
              {% if intake > 150 %}Intake{% endif %}
            </div>
            <div style="width: {{ deficit_amount | times: 100.0 | divided_by: tdee }}%; background: #5cb85c; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.85rem; font-weight: bold; border-left: 2px solid #fff;">
              deficit!
            </div>
          </div>
        {% elsif is_surplus %}
          <!-- Surplus case: intake bar extends beyond 100% (TDEE) -->
          <div style="position: relative; width: {{ intake | times: 100.0 | divided_by: tdee }}%; max-width: 150%;">
            <div style="display: flex; height: 40px; border: 2px solid #333; border-radius: 4px; overflow: hidden;">
              <div style="width: {{ tdee | times: 100.0 | divided_by: intake }}%; background: #808080; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.85rem; font-weight: bold;">
                {% if tdee > 150 %}Intake{% endif %}
              </div>
              <div style="width: {{ surplus_amount | times: 100.0 | divided_by: intake }}%; background: #d9534f; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.85rem; font-weight: bold; border-left: 2px solid #fff;">
                surplus!
              </div>
            </div>
          </div>
        {% else %}
          <!-- Maintenance: intake equals TDEE -->
          <div style="display: flex; height: 40px; border: 2px solid #333; border-radius: 4px; overflow: hidden;">
            <div style="width: 100%; background: #808080; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.85rem; font-weight: bold;">
              Intake
            </div>
          </div>
        {% endif %}
        <div style="position: absolute; bottom: -20px; left: 0; right: 0; text-align: center; font-size: 0.75rem; color: #666;">
          Intake: {{ intake }} kcal
          {% if is_deficit %}
            | Deficit: {{ deficit_amount }} kcal
          {% elsif is_surplus %}
            | Surplus: {{ surplus_amount }} kcal
          {% endif %}
        </div>
      </div>

      <!-- Additional metrics -->
      <div style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #ddd; font-size: 0.85rem; color: #666; display: flex; justify-content: space-around; flex-wrap: wrap; gap: 1rem;">
        <div><strong>RMR:</strong> {{ rmr }} kcal</div>
        <div><strong>Active:</strong> {{ active }} kcal</div>
        {% if page.cal.weight %}
        <div><strong>Weight:</strong> {{ page.cal.weight }} kg</div>
        {% endif %}
      </div>
    </div>
    {% endif %}

    <div class="post-content">
      {{ content }}
    </div>

    {% if site.giscus_enabled %}
      {% include giscus.html %}
    {% endif %}
  </article>
</main>

