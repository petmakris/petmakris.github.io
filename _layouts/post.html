---
layout: default
---

<style>
  /* Post headings */
  .post h3 {
    margin-bottom: 1.5rem;
    margin-top: 2rem;
  }

  /* Post image styling */
  .post-content img {
    display: block;
    max-width: 100%;
    height: auto;
    margin: 2rem auto;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  /* Consistent image size - you can adjust these values */
  .post-content img {
    max-height: 500px;
    object-fit: cover;
    width: 100%;
  }

  /* Hide text in small bars - only show if width is sufficient */
  .bar-text {
    white-space: nowrap;
    overflow: hidden;
  }

  /* Show text only when container is wide enough */
  @container (min-width: 80px) {
    .bar-text {
      display: inline;
    }
  }

  @media (max-width: 768px) {
    .post-content img {
      max-height: 300px;
    }
  }
</style>

<nav class="post-pager" style="display:flex; justify-content:space-between; gap:1rem; padding: 1rem">
  <div>
    {% if page.previous %}
      <a rel="prev" href="{{ page.previous.url | relative_url }}" title="{{ page.previous.title }}" class="btn btn-sm btn-outline-primary">
        ⬅️ {{ page.previous.date | date: "%Y-%m-%d" }}
      </a>
    {% endif %}
  </div>

  <div style="margin-left:auto; text-align:right;">
    {% if page.next %}
      <a rel="next" href="{{ page.next.url | relative_url }}" title="{{ page.next.title }}" class="btn btn-sm btn-outline-primary">
        {{ page.next.date | date: "%Y-%m-%d" }} ➡️
      </a>
    {% endif %}
  </div>
</nav>


<main class="page-content" style="max-width: 860px; margin: 0 auto; ">
  <article class="post">
    <header>
      <h3>{{ page.title }}</h3>
    </header>

    {% if page.cal.intake and page.cal.tdee %}
    {% assign intake = page.cal.intake | plus: 0 %}
    {% assign tdee = page.cal.tdee | plus: 0 %}
    {% assign active = page.cal.active | default: 0 | plus: 0 %}
    {% assign rmr = tdee | minus: active %}
    {% assign deficit = page.cal.deficit | default: 0 | plus: 0 %}
    {% assign is_deficit = false %}
    {% assign is_surplus = false %}
    
    {% if intake < tdee %}
      {% assign is_deficit = true %}
      {% assign deficit_amount = tdee | minus: intake %}
    {% elsif intake > tdee %}
      {% assign is_surplus = true %}
      {% assign surplus_amount = intake | minus: tdee %}
    {% endif %}

    <div class="calorie-viz" style="margin: 1rem; padding: 1rem; border-radius: 8px;">
      
      <!-- TDEE Bar with container -->
      <div style="position: relative; margin-bottom: 1.5rem;">
        <div style="text-align: center; font-weight: bold; font-size: 0.875rem; margin-bottom: 0.5rem; color: #555;">
          TDEE = RMR + active
        </div>
        {% if is_surplus %}
          <!-- On surplus days, TDEE bar is shorter (scaled to intake) -->
          <div class="cal-container-tdee" style="width: {{ tdee | times: 100.0 | divided_by: intake }}%;">
            <div style="display: flex; height: 40px; border: 2px solid #333; border-radius: 4px; overflow: hidden;">
              {% if rmr > 0 %}
              <div class="cal-bar-rmr" style="width: {{ rmr | times: 100.0 | divided_by: tdee }}%; display: flex; align-items: center; justify-content: center; color: white;  font-weight: bold;">
                {% if rmr > 100 %}RMR{% endif %}
              </div>
              {% endif %}
              {% if active > 0 %}
              <div class="cal-bar-active" style="width: {{ active | times: 100.0 | divided_by: tdee }}%; display: flex; align-items: center; justify-content: center; color: white;  font-weight: bold;">
                {% if active > 100 %}active{% endif %}
              </div>
              {% endif %}
            </div>
          </div>
        {% else %}
          <!-- On deficit/maintenance days, TDEE bar is full width -->
          <div class="cal-container-tdee">
            <div style="display: flex; height: 40px; border: 2px solid #333; border-radius: 4px; overflow: hidden;">
              {% if rmr > 0 %}
              <div class="cal-bar-rmr" style="width: {{ rmr | times: 100.0 | divided_by: tdee }}%; display: flex; align-items: center; justify-content: center; color: white;  font-weight: bold;">
                {% if rmr > 100 %}RMR{% endif %}
              </div>
              {% endif %}
              {% if active > 0 %}
              <div class="cal-bar-active" style="width: {{ active | times: 100.0 | divided_by: tdee }}%; display: flex; align-items: center; justify-content: center; color: white;  font-weight: bold;">
                {% if active > 100 %}active{% endif %}
              </div>
              {% endif %}
            </div>
          </div>
        {% endif %}
      </div>

      <!-- Intake Bar with container -->
      <div style="margin-bottom: 0.5rem; font-size: 0.875rem; color: #555; text-align: center; font-weight: bold;">
        intake
      </div>

      <!-- Intake Bar (positioned relative to TDEE) -->

      <div style="position: relative; margin-bottom: 1rem;">
        {% if is_deficit %}
          <!-- Deficit case: intake bar is SHORTER, deficit is empty space in the green container -->
          {% assign intake_percent = intake | times: 100.0 | divided_by: tdee %}
          {% assign deficit_percent = deficit_amount | times: 100.0 | divided_by: tdee %}
          <div class="cal-container-deficit">
            <div style="display: flex; height: 40px; border-radius: 4px; overflow: hidden;">
              <div class="cal-bar-intake" style="width: {{ intake_percent }}%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 0.875rem; border: 2px solid #333;">
                intake
              </div>
              <div class="cal-text-deficit" style="width: {{ deficit_percent }}%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.875rem; padding-left: 0.5rem;">
                {% if deficit_percent > 8 %}deficit{% endif %}
              </div>
            </div>
          </div>

        {% elsif is_surplus %}
          <!-- Surplus case: intake bar extends BEYOND TDEE to show surplus -->
          {% assign surplus_percent = surplus_amount | times: 100.0 | divided_by: tdee %}
          <div style="background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%); padding: 1rem; border-radius: 8px; display: inline-block; min-width: 100%;">
            <div style="display: flex; height: 40px; border-radius: 4px;">
              <div class="cal-bar-intake" style="width: 100%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 0.875rem; border: 2px solid #333; border-right: none;">
                intake
              </div>
              <div class="cal-bar-surplus" style="width: {{ surplus_percent }}%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; border: 2px solid #333; font-size: 0.875rem; flex-shrink: 0;">
                {% if surplus_percent > 8 %}surplus{% endif %}
              </div>
            </div>
          </div>
        {% else %}
          <!-- Maintenance: intake equals TDEE in neutral container -->
          <div class="cal-container-maintenance">
            <div style="display: flex; height: 40px; border: 2px solid #333; border-radius: 4px; overflow: hidden;">
              <div class="cal-bar-intake" style="width: 100%; display: flex; align-items: center; justify-content: center; color: white;  font-weight: bold; font-size: 0.875rem;">
                Intake
              </div>
            </div>
          </div>
        {% endif %}
      </div>

      <div style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #ddd;  color: #666; display: flex; justify-content: space-around; flex-wrap: wrap; gap: 1rem;">

        <div><strong>TDEE:</strong> {{ tdee }} kcal</div>

        <div><strong>RMR:</strong> {{ rmr }} kcal</div>

        <div><strong>Intake:</strong> {{ intake }} kcal</div>
        
        <div><strong>Active:</strong> {{ active }} kcal</div>

        {% if page.cal.weight %}
        <div><strong>Weight:</strong> {{ page.cal.weight }} kg</div>
        {% endif %}

      </div>

    </div>
    {% endif %}

    <div class="post-content">
      {{ content }}
    </div>

    {% if site.giscus_enabled %}
      {% include giscus.html %}
    {% endif %}
  </article>
</main>

