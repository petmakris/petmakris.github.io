---
layout: default
---

<style>
  /* Post headings */
  .post h3 {
    margin-bottom: 1.5rem;
    margin-top: 2rem;
  }

  /* Post image styling */
  .post-content img {
    display: block;
    max-width: 100%;
    height: auto;
    margin: 2rem auto;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  /* Consistent image size - you can adjust these values */
  .post-content img {
    max-height: 500px;
    object-fit: cover;
    width: 100%;
  }

  /* Hide text in small bars - only show if width is sufficient */
  .bar-text {
    white-space: nowrap;
    overflow: hidden;
  }

  /* Show text only when container is wide enough */
  @container (min-width: 80px) {
    .bar-text {
      display: inline;
    }
  }

  @media (max-width: 768px) {
    .post-content img {
      max-height: 300px;
    }
  }
</style>

<nav class="post-pager" style="display:flex; justify-content:space-between; gap:1rem; padding: 1rem">
  <div>
    {% if page.previous %}
      <a rel="prev" href="{{ page.previous.url | relative_url }}" title="{{ page.previous.title }}" class="btn btn-sm btn-outline-primary">
        ⬅️ {{ page.previous.date | date: "%Y-%m-%d" }}
      </a>
    {% endif %}
  </div>

  <div style="margin-left:auto; text-align:right;">
    {% if page.next %}
      <a rel="next" href="{{ page.next.url | relative_url }}" title="{{ page.next.title }}" class="btn btn-sm btn-outline-primary">
        {{ page.next.date | date: "%Y-%m-%d" }} ➡️
      </a>
    {% endif %}
  </div>
</nav>


<main class="page-content" style="max-width: 860px; margin: 0 auto; ">
  <article class="post">
    <header>
      <h3>{{ page.title }}</h3>
    </header>

    {% if page.cal.intake and page.cal.tdee %}
    {% assign intake = page.cal.intake | plus: 0 %}
    {% assign tdee = page.cal.tdee | plus: 0 %}
    {% assign active = page.cal.active | default: 0 | plus: 0 %}
    {% assign rmr = tdee | minus: active %}
    {% assign deficit = page.cal.deficit | default: 0 | plus: 0 %}
    {% assign is_deficit = false %}
    {% assign is_surplus = false %}
    
    {% if intake < tdee %}
      {% assign is_deficit = true %}
      {% assign deficit_amount = tdee | minus: intake %}
    {% elsif intake > tdee %}
      {% assign is_surplus = true %}
      {% assign surplus_amount = intake | minus: tdee %}
    {% endif %}

    <div class="calorie-viz" style="margin: 1rem; padding: 1rem; border-radius: 8px;">
      
      <div style="position: relative; margin-bottom: 1.5rem;">
        <div style="display: flex; height: 40px; border: 2px solid #333; border-radius: 4px; overflow: hidden; {% if is_surplus %}width: {{ tdee | times: 100.0 | divided_by: intake }}%;{% endif %}">
          {% if rmr > 0 %}
          <div style="width: {{ rmr | times: 100.0 | divided_by: tdee }}%; background: #999; display: flex; align-items: center; justify-content: center; color: white;  font-weight: bold;">
            {% if rmr > 100 %}RMR{% endif %}
          </div>
          {% endif %}
          {% if active > 0 %}
          <div style="width: {{ active | times: 100.0 | divided_by: tdee }}%; background: #4a90e2; display: flex; align-items: center; justify-content: center; color: white;  font-weight: bold;">
            {% if active > 100 %}active{% endif %}
          </div>
          {% endif %}
        </div>
      </div>

      <div style="margin-bottom: 0.5rem; font-size: 0.9rem; color: #666; text-align: center;">
        {% if is_deficit %}
          <strong></strong>
        {% elsif is_surplus %}
          <strong>intake</strong>
        {% else %}
          <strong>intake</strong>
        {% endif %}
      </div>

      <!-- Intake Bar (positioned relative to TDEE) -->

      <div style="position: relative; margin-bottom: 1rem;">
        {% if is_deficit %}
          <!-- Deficit case: show intake bar + green deficit space -->
          {% assign deficit_percent = deficit_amount | times: 100.0 | divided_by: tdee %}
          <div style="display: flex; height: 40px; border: 2px solid #333; border-radius: 4px; overflow: hidden;">
            <div style="width: {{ intake | times: 100.0 | divided_by: tdee }}%; background: #808080; display: flex; align-items: center; justify-content: center; color: white;  font-weight: bold; font-size: 0.875rem;">
              {% if intake > 150 %}intake{% endif %}
            </div>
            <div style="width: {{ deficit_percent }}%; background: #5cb85c; display: flex; align-items: center; justify-content: center; color: white;  font-weight: bold; border-left: 2px solid #fff; font-size: 0.875rem;">
              {% if deficit_percent > 8 %}deficit{% endif %}
            </div>
          </div>

        {% elsif is_surplus %}
          <!-- Surplus case: intake bar is full width, showing TDEE portion + surplus portion -->
          {% assign surplus_percent = surplus_amount | times: 100.0 | divided_by: intake %}
          <div style="display: flex; height: 40px; border: 2px solid #333; border-radius: 4px; overflow: hidden;">
            <div style="width: {{ tdee | times: 100.0 | divided_by: intake }}%; background: #808080; display: flex; align-items: center; justify-content: center; color: white;  font-weight: bold; font-size: 0.875rem;">
            </div>
            <div style="width: {{ surplus_percent }}%; background: #d9534f; display: flex; align-items: center; justify-content: center; color: white;  font-weight: bold; border-left: 2px solid #fff; font-size: 0.875rem;">
              {% if surplus_percent > 8 %}surplus{% endif %}
            </div>
          </div>
        {% else %}
          <!-- Maintenance: intake equals TDEE -->
          <div style="display: flex; height: 40px; border: 2px solid #333; border-radius: 4px; overflow: hidden;">
            <div style="width: 100%; background: #808080; display: flex; align-items: center; justify-content: center; color: white;  font-weight: bold; font-size: 0.875rem;">
              Intake
            </div>
          </div>
        {% endif %}
      </div>

      <div style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #ddd;  color: #666; display: flex; justify-content: space-around; flex-wrap: wrap; gap: 1rem;">

        <div><strong>TDEE:</strong> {{ tdee }} kcal</div>

        <div><strong>RMR:</strong> {{ rmr }} kcal</div>

        <div><strong>Intake:</strong> {{ intake }} kcal</div>
        
        <div><strong>Active:</strong> {{ active }} kcal</div>

        {% if page.cal.weight %}
        <div><strong>Weight:</strong> {{ page.cal.weight }} kg</div>
        {% endif %}

      </div>

    </div>
    {% endif %}

    <div class="post-content">
      {{ content }}
    </div>

    {% if site.giscus_enabled %}
      {% include giscus.html %}
    {% endif %}
  </article>
</main>

